{"version":3,"sources":["app.js","github.js","instagram.js"],"names":["App","plugins","$","Object","keys","forEach","p","run","win","window","scrollState","checkScroll","st","scrollTop","addClass","removeClass","on","TOKEN","USERNAME","github","_this","this","apiUri","repoPath","query","store","localStorage","sortOrder","cutAt","cache","getItem","JSON","parse","ts","now","Date","getTime","_handleData","data","s","getJSON","then","r","o","setItem","stringify","fail","err","console","error","t","empty","sort","a","b","watchers_count","tmp","name","undefined","obj","i","j","x","length","splice","push","concat","cnt","cls","row","description","fork","language","stargazers_count","html_url","append","more","insertAfter","find","requestAnimationFrame","fadeOut","remove","ACCESS_TOKEN","USER_ID","instagram","url","done","e","d","link","caption","text","images","low_resolution","width","height","likes","count","comments"],"mappings":"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","file":"app.min.js","sourcesContent":["/* exports App */\n\n(function() {\n  'use strict';\n  let App = {\n    plugins: {}\n  };\n\n  $(() => {\n    Object.keys(App.plugins).forEach(p => {\n      App.plugins[p].run();\n    });\n  });\n\n  let win = $(window);\n  let scrollState = 0;\n  let checkScroll = () => {\n    let st = win.scrollTop();\n\n    if (st > 100) {\n      if (scrollState === 2) {\n        return;\n      }\n\n      scrollState = 2;\n      $('header').addClass('scrolled');\n    }\n    else {\n      if (scrollState === 1) {\n        return;\n      }\n\n      scrollState = 1;\n      $('header').removeClass('scrolled');\n    }\n  };\n\n  win.on('scroll', checkScroll);\n\n  window.App = App;\n\n}());","/* global App $ */\n\n(function() {\n  'use strict';\n\n  const TOKEN = '7a1785a8e3d036cf2174e4b7e80b6f70b3b1faca';\n  const USERNAME = 'poppa';\n\n  App.plugins.github = (new function() {\n    let apiUri = 'https://api.github.com';\n    let repoPath = `/users/${USERNAME}/repos`;\n    let query = `?token=${TOKEN}&auth=oauth&callback=?`;\n    let store = localStorage;\n    let sortOrder = [ 'Pike-Modules', 'jsvault', 'Roxen-Application-Launcher',\n                      'php-lime-pro', 'java-lime-pro', 'csharp-lime-pro',\n                      'pike-for-sublime' ];\n    let cutAt = 9;\n\n    this.run = () => {\n      let cache = store.getItem('github');\n\n      if (cache) {\n        cache = JSON.parse(cache);\n        let ts = cache.ts/1000;\n        let now = new Date().getTime()/1000;\n        if (now-ts < 60*60*4) { // Four hours\n          this._handleData(cache.data);\n          return;\n        }\n      }\n\n      let s = apiUri + repoPath + query + '&sort=updated';\n\n      $.getJSON(s)\n      .then((r) => {\n        let o = {\n          ts: new Date().getTime(),\n          data: r\n        };\n\n        store.setItem('github', JSON.stringify(o));\n        this._handleData(r);\n      })\n      .fail((err) => {\n        window.console.error('Fail: ', err);\n      });\n    };\n\n    this._handleData = (data) => {\n      let t = $('#github');\n      t.empty();\n      data.data.sort((a, b) => {\n        return a.watchers_count < b.watchers_count\n          ? 1\n          : a.watchers_count === b.watchers_count\n            ? 0\n            : -1;\n      });\n\n      let tmp = [],\n        name = undefined,\n        obj = undefined,\n        i = 0, j = 0, x = undefined;\n\n      for (; i < sortOrder.length; i++) {\n        name = sortOrder[i];\n\n        for (j = 0; j < data.data.length; j++) {\n          obj = data.data[j];\n          if (obj.name === name) {\n            x = data.data.splice(j, 1);\n            tmp.push(x[0]);\n            break;\n          }\n        }\n      }\n\n      data.data = tmp.concat(data.data);\n\n      let cnt = 0, cls = '';\n      data.data.forEach((row) => {\n        if (cnt >= cutAt) {\n          cls = ' hidden';\n        }\n        let s = `<li class='col-md-4 col-xs-6${cls}'>\n          <div class='wrapper'>\n            <h3>${row.name}</h3>\n            <p>${row.description}</p>\n            <div class='meta'>`;\n\n        if (row.fork) {\n          s += '<i class=\"item fa fa-code-fork\"></i>';\n        }\n\n        s += `<span class='item'>${row.language || 'Misc'}</span>`;\n        s += `<span class='item'><i class='fa fa-star'></i> ${row.stargazers_count}</span>`;\n        s += `<span class='item'><i class='fa fa-eye'></i> ${row.watchers_count}</span>`;\n        s += `<a href='${row.html_url}' class='item' target='github'><i class='fa fa-github'></i> View on Github</a>`;\n\n        s += '</div></div></li>';\n\n        t.append(s);\n\n        cnt += 1;\n      });\n\n      let more = $('<button class=\"more\">Show more</button>');\n      more.insertAfter(t);\n\n      more.on('click', function() {\n\n        t.find('li.hidden').addClass('transition').removeClass('hidden');\n        window.requestAnimationFrame(() => {\n          t.find('li.transition').removeClass('transition');\n        });\n        $(this).fadeOut('fast', function() {\n          $(this).remove();\n        });\n      });\n    };\n  }());\n\n\n}());","/* global App $ localStorage */\n\n(function() {\n  'use strict';\n  const ACCESS_TOKEN  = '40563140.5d854a2.bf2dc58a4abc46478f3be8b43bc1e53b';\n  const USER_ID       = '40563140';\n  const store = localStorage;\n\n  App.plugins.instagram = (new function() {\n    this.run = () => {\n      let cache = store.getItem('instagram');\n\n      if (cache) {\n        cache = JSON.parse(cache);\n        let ts = cache.ts/1000;\n        let now = new Date().getTime()/1000;\n\n        if (now-ts < 600) {\n          this._handleData(cache.data);\n          return;\n        }\n      }\n\n      let url = `https://api.instagram.com/v1/users/${USER_ID}/media/recent/` +\n        '?access_token=' + ACCESS_TOKEN +\n        '&count=4' +\n        '&callback=?';\n\n      $.getJSON(url)\n      .done(data => {\n        let o = {\n          ts: new Date().getTime(),\n          data: data\n        };\n        store.setItem('instagram', JSON.stringify(o));\n        this._handleData(data);\n      })\n      .fail((e) => {\n        window.console.error('Error: ', e);\n        let t = $('#instagram li');\n        t.empty().append('<div class=\"notify icon error on-dark\">Unable to connect to Instagram!</div>');\n      });\n    };\n\n    this._handleData = d => {\n      let t = $('#instagram');\n      t.empty();\n      d.data.forEach(row => {\n        let s = `<li class=\"col-md-3 col-xs-6\">\n            <a href=\"${row.link}\" target=\"ig\">\n              <span class=\"overlay top\">${row.caption.text}</span>\n              <img src=\"${row.images.low_resolution.url}\"\n                   width=\"${row.images.low_resolution.width}\"\n                   height=\"${row.images.low_resolution.height}\">\n              <span class=\"ig-overlay\">\n                <i class=\"fa fa-instagram\"></i>\n                <span>View on Instagram</span>\n              </span>\n              <span class=\"overlay bottom\">\n                <span class=\"likes\"><i class=\"fa fa-thumbs-up\"></i> ${row.likes.count}</span>\n                <span class=\"comments\"><i class=\"fa fa-comments\"></i> ${row.comments.count}</span>\n              </span>\n            </a>\n          </li>`;\n\n        t.append(s);\n      });\n    };\n  }());\n}());\n"],"sourceRoot":"/source/"}