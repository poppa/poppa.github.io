<!doctype html>
<html>
  <head>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta charset="utf-8">
    <title>MIME.Message - Pike Reference Manual</title>
    <!-- 221-->
    <link rel='stylesheet' href='../../../style.css'>
    <script src='../../../site.js'></script>
    <script src='../../../constants.js'></script>
    <script>PikeDoc.NO_DYNAMIC = false;</script>
    <style type='text/css'>
svg line { stroke:#343434; stroke-width:2; }
svg text { fill:#343434; }
svg a { fill:#0768b2; text-decoration: underline; }
</style>

  </head>
  <body>
    <header>
      <div class="header">
        <div id="version"><strong data-id="version">Pike v8.1 release 6</strong></div>
        <div id="burger">&#9776;</div><!-- Hamburger icon -->
        <h1>
          <a href="http://pike.lysator.liu.se/" class="logo">
            <span>Pike programming language</span>
          </a>
        </h1>
      </div>
    </header>
    <div id="page">
      <div class="navbar">
        <nav>
          <div class="inner" id="navbar">
            <a href='../../../index.html'><b class='top head'>Top</b></a>
<a href='../../../ex/predef_3A_3A/MIME.html'><b class='head'>MIME</b></a>
<b class='selected head'>MIME.Message</b>
<script></script>
<noscript>
<div class='sidebar'>
<a href='../../../ex/predef_3A_3A/MIME/Message/index.html'><b>Symbol index</b></a><br />
</div>
</noscript>

          </div>
        </nav>
      </div>
      <div class="content">
        <div class="navbox">
          <nav>
            <div class="sidebar">
              <a href="../../../ex/predef_3A_3A/MIME.html" class="prev"><span>&#10148;</span> MIME</a>
              <a href="../../../ex/predef_3A_3A/MIME/Message/create.html" class="next">MIME.Message()-&gt;create() <span>&#10148;</span></a>
            </div>
          </nav>
        </div>
        <div class="contentbox">
          <article>
            <h1>Class MIME.Message</h1>
            <dl class='group--doc'>
<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>This class is used to hold a decoded MIME message.</p>
</dd></dl>

<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>body_parts</b></span>
</dt>
<dd><p><code><code class='datatype'>array</code>(<code class='datatype'>object</code>) MIME.Message.<b><span class='variable'>body_parts</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>If the message is of type <tt>multipart</tt>, this is an array
 containing one Message object for each part of the message.
 If the message is not a multipart, this field is <code class='expr'>0</code> (zero).</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>type</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>boundary</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>boundary</b></span>
</dt>
<dd><p><code><code class='datatype'>string</code> MIME.Message.<b><span class='variable'>boundary</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>For multipart messages, this <tt>Content-Type</tt> parameter gives a
 delimiter string for separating the individual messages.  As multiparts
 are handled internally by the module, you should not need to access this
 field.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message/setboundary.html'>setboundary()</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>charset</b></span>
</dt>
<dd><p><code><code class='datatype'>string</code> MIME.Message.<b><span class='variable'>charset</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>One of the possible parameters of the <tt>Content-Type</tt> header is the
 charset attribute. It determines the character encoding used in bodies of
 type <tt>text</tt>.</p>
<p> If there is no <tt>Content-Type</tt> header, the value of this field
 is <code class='expr'>"us-ascii"</code>.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>type</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>data</b></span>
</dt>
<dd><p><code><code class='datatype'>string</code> MIME.Message.<b><span class='variable'>data</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>This variable contains the raw data of the message body entity.</p>
<p> The <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>type</a> and <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>subtype</a> attributes indicate how this data should
 be interpreted.</p>
</dd>
<dt class='head--doc'>Note</dt>
<dd class='body--doc'><p>In Pike 7.6 and earlier you had to use <a class='ms reference' href='../../predef_3A_3A/MIME/Message/getdata.html'>getdata()</a> and
   <a class='ms reference' href='../../predef_3A_3A/MIME/Message/setdata.html'>setdata()</a> to access this value.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message/getdata.html'>getdata()</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message/setdata.html'>setdata()</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>disp_params</b></span>
</dt>
<dd><p><code><code class='datatype'>mapping</code>(<code class='datatype'>string</code>:<code class='datatype'>string</code>) MIME.Message.<b><span class='variable'>disp_params</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>A mapping containing all the additional parameters to the
 <tt>Content-Disposition</tt> header.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message/setdisp_param.html'>setdisp_param()</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message/get_filename.html'>get_filename()</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>disposition</b></span>
</dt>
<dd><p><code><code class='datatype'>string</code> MIME.Message.<b><span class='variable'>disposition</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>The first part of the <tt>Content-Disposition</tt> header, hinting on how
 this part of a multipart message should be presented in an interactive
 application.</p>
<p> If there is no <tt>Content-Disposition</tt> header, this field
 is <code class='expr'>0</code>.</p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>headers</b></span>
</dt>
<dd><p><code><code class='datatype'>mapping</code>(<code class='datatype'>string</code>:<code class='datatype'>string</code>) MIME.Message.<b><span class='variable'>headers</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>This mapping contains all the headers of the message.</p>
<p> The key is the header name (in lower case) and the value is
 the header value.</p>
<p> Although the mapping contains all headers, some particular headers get
 special treatment by the module and should <b>not</b> be accessed through
 this mapping. These fields are currently:</p>
<table class='box'><tr><td><code><code class='key'>"content-type"</code></code></td></tr>
<tr><td><code><code class='key'>"content-disposition"</code></code></td></tr>
<tr><td><code><code class='key'>"content-length"</code></code></td></tr>
<tr><td><code><code class='key'>"content-transfer-encoding"</code></code></td></tr>
</table><p>The contents of these fields can be accessed and/or modified through
 a set of variables and methods available for this purpose.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>type</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>subtype</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>charset</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>boundary</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>transfer_encoding</a>,
 <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>params</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>disposition</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>disp_params</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message/setencoding.html'>setencoding()</a>,
 <a class='ms reference' href='../../predef_3A_3A/MIME/Message/setparam.html'>setparam()</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message/setdisp_param.html'>setdisp_param()</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message/setcharset.html'>setcharset()</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message/setboundary.html'>setboundary()</a></p>
</dd>
<dt class='head--doc'>Note</dt>
<dd class='body--doc'><p>Some headers (eg Subject) may include <b><a href='http://pike.lysator.liu.se/rfc1522.xml'>RFC 1522</a></b>/<b><a href='http://pike.lysator.liu.se/rfc2047.xml'>RFC 2047</a></b> encoded words. To
 decode these, see <a class='ms reference' href='../../predef_3A_3A/MIME/decode_words_text.html'>decode_words_text</a> and <a class='ms reference' href='../../predef_3A_3A/MIME/decode_words_tokenized.html'>decode_words_tokenized</a> and
 their friends.</p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>params</b></span>
</dt>
<dd><p><code><code class='datatype'>mapping</code>(<code class='datatype'>string</code>:<code class='datatype'>string</code>) MIME.Message.<b><span class='variable'>params</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>A mapping containing all the additional parameters to the
 <tt>Content-Type</tt> header.</p>
<p> Some of these parameters have fields of their own, which should
 be accessed instead of this mapping wherever applicable.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>charset</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>boundary</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message/setparam.html'>setparam()</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>subtype</b></span>
</dt>
<dd><p><code><code class='datatype'>string</code> MIME.Message.<b><span class='variable'>subtype</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>The <tt>Content-Type</tt> header contains a type, a subtype, and optionally
 some parameters. This field contains the subtype attribute extracted
 from the header.</p>
<p> If there is no <tt>Content-Type</tt> header, the value of this field
 is <code class='expr'>"plain"</code>.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>type</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>params</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>transfer_encoding</b></span>
</dt>
<dd><p><code><code class='datatype'>string</code> MIME.Message.<b><span class='variable'>transfer_encoding</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>The contents of the <tt>Content-Transfer-Encoding</tt> header.</p>
<p> If no <tt>Content-Transfer-Encoding</tt> header is given, this field
 is <code class='expr'>0</code> (zero).</p>
<p> Transfer encoding and decoding is done transparently by the module,
 so this field should be interesting only to applications wishing to
 do auto conversion of certain transfer encodings.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message/setencoding.html'>setencoding()</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Variable</span>
<span class='homogen--name'><b>type</b></span>
</dt>
<dd><p><code><code class='datatype'>string</code> MIME.Message.<b><span class='variable'>type</span></b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>The <tt>Content-Type</tt> header contains a type, a subtype, and optionally
 some parameters. This field contains the type attribute extracted
 from the header.</p>
<p> If there is no <tt>Content-Type</tt> header, the value of this field
 is <code class='expr'>"text"</code>.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>subtype</a>, <a class='ms reference' href='../../predef_3A_3A/MIME/Message.html'>params</a></p>
</dd></dl>


<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Method</span>
<span class='homogen--name'><b>create</b></span>
</dt>
<dd><p><code><span class='object'>MIME.Message</span> <span class='class'>MIME.Message</span><b>(</b><b>)</b></code><br>
<code><span class='object'>MIME.Message</span> <span class='class'>MIME.Message</span><b>(</b><code class='datatype'>string</code> <code class='argument'>message</code><b>)</b></code><br>
<code><span class='object'>MIME.Message</span> <span class='class'>MIME.Message</span><b>(</b><code class='datatype'>string</code> <code class='argument'>message</code>, <code class='datatype'>mapping</code>(<code class='datatype'>string</code>:<code class='datatype'>string</code>|<code class='datatype'>array</code>(<code class='datatype'>string</code>)) <code class='argument'>headers</code>, <code class='datatype'>array</code>(<code class='datatype'>object</code>)|<code class='datatype'>void</code> <code class='argument'>parts</code><b>)</b></code><br>
<code><span class='object'>MIME.Message</span> <span class='class'>MIME.Message</span><b>(</b><code class='datatype'>string</code> <code class='argument'>message</code>, <code class='datatype'>mapping</code>(<code class='datatype'>string</code>:<code class='datatype'>string</code>|<code class='datatype'>array</code>(<code class='datatype'>string</code>)) <code class='argument'>headers</code>, <code class='datatype'>array</code>(<code class='datatype'>object</code>)|<code class='datatype'>void</code> <code class='argument'>parts</code>, <code class='datatype'>bool</code> <code class='argument'>guess</code><b>)</b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>There are several ways to call the constructor of the Message class:</p>
<ul>
<li><p>With zero arguments, you will get a dummy message with neither
     headers nor body. Not very useful.</p>
</li><li><p>With one argument, the argument is taken to be a byte stream
     containing a message in encoded form. The constructor will analyze
     the string and extract headers and body.</p>
</li><li><p>With two or three arguments, the first argument is taken to be the
     raw body data, and the second argument a desired set of headers.
     The keys of this mapping are not case-sensitive.  If the given
     headers indicate that the message should be of type multipart,
     an array of Message objects constituting the subparts should be
     given as a third argument.</p>
</li><li><p>With the <a class='ms reference' href='../../predef_3A_3A/MIME/Message/create.html'>guess</a> argument set to 1 (<a class='ms reference' href='../../predef_3A_3A/MIME/Message/create.html'>headers</a> and <a class='ms reference' href='../../predef_3A_3A/MIME/Message/create.html'>parts</a> may be 0
     if you don't want to give any), you get a more forgiving MIME Message
     that will do its best to guess what broken input data really meant. It
     won't always guess right, but for applications like mail archives and
     similar where you can't get away with throwing an error at the user,
     this comes in handy. Only use the <a class='ms reference' href='../../predef_3A_3A/MIME/Message/create.html'>guess</a> mode only for situations
     where you <i>need</i> to process broken MIME messages silently; the
     abuse of overly lax tools is what poisons standards.</p>
</li></ul>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/MIME/Message/cast.html'>cast()</a></p>
</dd></dl>

          </article>
        </div>
      </div>
    </div>
    <footer>
      <div id="build-date">Extracted from <strong data-id="version">Pike v8.1 release 6</strong> as of <strong data-id="date" data-timestamp="1478943856">2016-11-12</strong>.</div>
    </footer>
    <script>PikeDoc.current = {"link":"ex/predef_3A_3A/MIME/Message.html","name":"Message"};</script>
<script src='../../../ex/predef_3A_3A/MIME/index.js'></script>
<script src='../../../ex/predef_3A_3A/MIME/Message/load_index.js'></script>
    <script>
      // Tell PikeDoc that next actions are from loaded scripts
      PikeDoc.isInline = false;
    </script>
  </body>
</html>
