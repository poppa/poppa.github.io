<!doctype html>
<html>
  <head>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta charset="utf-8">
    <title>Pike Reference Manual - Sql.pgsql</title>
    <!-- 178 -->
    <link rel='stylesheet' href='../../../style.css'>
    <script src='../../../site.js'></script>
    <script src='../../../pike_version.js'></script>
    <script src='../../../timestamp.js'></script>
    <style type='text/css'>
svg line { stroke:#343434; stroke-width:2; }
svg text { fill:#343434; }
svg a { fill:#0768b2; text-decoration: underline; }
</style>

  </head>
  <body>
    <header>
      <div class="header">
        <div id="version"><strong data-id="version"></strong></div>
        <div id="burger">&#9776;</div><!-- Hamburger icon -->
        <h1>
          <a href="http://pike.lysator.liu.se/" class="logo">
            <span>Pike programming language</span>
          </a>
        </h1>
      </div>
    </header>
    <div id="page">
      <div class="navbar">
        <nav>
          <div class="inner" id="navbar">
            <a href='../../../index.html'><b class='top head'>Top</b></a>
<a href='../../../ex/predef_3A_3A/Sql.html'><b class='head'>Sql</b></a>
<b class='selected head'>Sql.pgsql</b>
<script></script>
<noscript>
<div class='sidebar'>
<a href='../../../ex/predef_3A_3A/Sql/pgsql/index.html'><b>Symbol index</b></a><br />
</div>
</noscript>

          </div>
        </nav>
      </div>
      <div class="content">
        <div class="navbox">
          <nav>
            <div class="sidebar">
              <a href="../../../ex/predef_3A_3A/Sql/odbc/TypedResult/uuid_factory.html" class="prev"><span>&#10148;</span> Sql.odbc()-&gt;TypedResult()-&gt;uuid_factory()</a>
              <a href="../../../ex/predef_3A_3A/Sql/pgsql/big_query.html" class="next">Sql.pgsql()-&gt;big_query() <span>&#10148;</span></a>
            </div>
          </nav>
        </div>
        <div class="contentbox">
          <article>
            <h1>Class Sql.pgsql</h1>
            
<dt class='head--doc'>Inheritance graph</dt>
<div class='inheritance-graph'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xml:space='preserve' width='100%' height='65px'>
<text x='0' y='20'><tspan style='font-family:monospace; font-weight:bold;'>Sql.pgsql</tspan></text>
<line x1='5' y1='25' x2='5' y2='56' />
<line x1='4' y1='35' x2='35' y2='35' />
<text x='40' y='40'><a class='ms reference' xlink:href='../../predef_3A_3A/Sql/pgsqls.html'>Sql.pgsqls</a></text>
<line x1='4' y1='55' x2='35' y2='55' />
<text x='40' y='60'><a class='ms reference' xlink:href='../../predef_3A_3A/Sql/postgres.html'>Sql.postgres</a></text>
</svg></div>
<dl class='group--doc'>
<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>This is an interface to the PostgreSQL database
 server. This module is independent of any external libraries.
 Note that you <b>do not</b> need to have a
 PostgreSQL server running on your host to use this module: you can
 connect to the database over a TCP/IP socket.</p>
<p> This module replaces the functionality of the older <a class='ms reference' href='../../predef_3A_3A/Sql/postgres.html'>Sql.postgres</a>
 and <a class='ms reference' href='../../predef_3A_3A/Postgres/postgres.html'>Postgres.postgres</a> modules.</p>
<p> This module supports the following features:</p>
<ul>
<li><p>PostgreSQL network protocol version 3, authentication methods
   currently supported are: cleartext and MD5 (recommended).</p>
</li><li><p>Streaming queries which do not buffer the whole resultset in memory.</p>
</li><li><p>Automatic binary transfers to and from the database for most common
   datatypes (amongst others: integer, text and bytea types).</p>
</li><li><p>Automatic character set conversion and native wide string support.
  Supports UTF8/Unicode for multibyte characters, and all single-byte
  character sets supported by the database.</p>
</li><li><p>SQL-injection protection by allowing just one statement per query
   and ignoring anything after the first (unquoted) semicolon in the query.</p>
</li><li><p>COPY support for streaming up- and download.</p>
</li><li><p>Accurate error messages.</p>
</li><li><p>Automatic precompilation of complex queries (session cache).</p>
</li><li><p>Multiple simultaneous queries on the same database connection.</p>
</li><li><p>Cancelling of long running queries by force or by timeout.</p>
</li><li><p>Event driven NOTIFY.</p>
</li><li><p>SSL encrypted connections (optional or forced).</p>
</li></ul><p>Check the PostgreSQL documentation for further details.</p>
</dd>
<dt class='head--doc'>Note</dt>
<dd class='body--doc'><p>Multiple simultaneous queries on the same database connection is a
   feature that none of the other database drivers for Pike support.
   So, although it's efficient, its use will make switching database drivers
   difficult.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/Sql/Sql.html'>Sql.Sql</a>, <a class='ms reference' href='../../predef_3A_3A/Sql/postgres.html'>Sql.postgres</a>, <a href='http://www.postgresql.org/docs/'>http://www.postgresql.org/docs/</a></p>
</dd></dl>

<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Method</span>
<span class='homogen--name'><b>create</b></span>
</dt>
<dd><p><code><span class='object'>Sql.pgsql</span> <span class='class'>Sql.pgsql</span><b>(</b><code class='datatype'>void</code>|<code class='datatype'>string</code> <code class='argument'>host</code>, <code class='datatype'>void</code>|<code class='datatype'>string</code> <code class='argument'>database</code>, <code class='datatype'>void</code>|<code class='datatype'>string</code> <code class='argument'>user</code>, <code class='datatype'>void</code>|<code class='datatype'>string</code> <code class='argument'>pass</code>, <code class='datatype'>void</code>|<code class='datatype'>mapping</code>(<code class='datatype'>string</code>:<code class='datatype'>mixed</code>) <code class='argument'>options</code><b>)</b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>With no arguments, this function initialises (reinitialises if a
 connection has been set up previously) a connection to the
 PostgreSQL backend. Since PostgreSQL requires a database to be
 selected, it will try to connect to the default database. The
 connection may fail however, for a variety of reasons; in this case
 the most likely reason is because you don't have sufficient privileges
 to connect to that database. So use of this particular syntax is
 discouraged.</p>
</dd>
<dt class='head--doc'><span id='p-host'></span>Parameter <code class='parameter'>host</code></dt>
<dd></dd><dd class='body--doc'><p>Should either contain <code class='expr'>"hostname"</code> or
 <code class='expr'>"hostname:portname"</code>. This allows you to specify the TCP/IP
 port to connect to. If the parameter is <code class='expr'>0</code> or <code class='expr'>""</code>,
 it will try to connect to localhost, default port.</p>
</dd>
<dt class='head--doc'><span id='p-database'></span>Parameter <code class='parameter'>database</code></dt>
<dd></dd><dd class='body--doc'><p>Specifies the database to connect to.  Not specifying this is
 only supported if the PostgreSQL backend has a default database
 configured.  If you do not want to connect to any live database,
 you can use <code class='expr'>"template1"</code>.</p>
</dd>
<dt class='head--doc'><span id='p-options'></span>Parameter <code class='parameter'>options</code></dt>
<dd></dd><dd class='body--doc'><p>Currently supports at least the following:</p>
<table class='box'><tr><td><code><code class='key'>"reconnect"</code> : <code class='datatype'>int</code></code></td><td><p>Set it to zero to disable automatic reconnects upon losing
     the connection to the database.  Not setting it, or setting
     it to one, will cause one timed reconnect to take place.
     Setting it to -1 will cause the system to try and reconnect
     indefinitely.</p>
</td></tr>
<tr><td><code><code class='key'>"use_ssl"</code> : <code class='datatype'>int</code></code></td><td><p>If the database supports and allows SSL connections, the session
	will be SSL encrypted, if not, the connection will fallback
	to plain unencrypted.</p>
</td></tr>
<tr><td><code><code class='key'>"force_ssl"</code> : <code class='datatype'>int</code></code></td><td><p>If the database supports and allows SSL connections, the session
	will be SSL encrypted, if not, the connection will abort.</p>
</td></tr>
<tr><td><code><code class='key'>"text_query"</code> : <code class='datatype'>int</code></code></td><td><p>Send queries to and retrieve results from the database using text
     instead of the, generally more efficient, default native binary method.
     Turning this on will allow multiple statements per query separated
     by semicolons.</p>
</td></tr>
<tr><td><code><code class='key'>"sync_parse"</code> : <code class='datatype'>int</code></code></td><td><p>Set it to zero to turn synchronous parsing off for statements.
     Setting this to off can cause surprises because statements could
     be parsed before the previous statements have been executed
     (e.g. references to temporary tables created in the preceding
     statement),
     but it can speed up parsing due to increased parallelism.</p>
</td></tr>
<tr><td><code><code class='key'>"cache_autoprepared_statements"</code> : <code class='datatype'>int</code></code></td><td><p>If set to zero, it disables the automatic statement prepare and
	cache logic; caching prepared statements can be problematic
	when stored procedures and tables are redefined which leave stale
	references in the already cached prepared statements.</p>
</td></tr>
<tr><td><code><code class='key'>"client_encoding"</code> : <code class='datatype'>string</code></code></td><td><p>Character encoding for the client side, it defaults to using
	the default encoding specified by the database, e.g.
	<code class='expr'>"UTF8"</code> or <code class='expr'>"SQL_ASCII"</code>.</p>
</td></tr>
<tr><td><code><code class='key'>"standard_conforming_strings"</code> : <code class='datatype'>string</code></code></td><td><p>When on, backslashes in strings must not be escaped any longer,
	<a class='ms reference' href='../../predef_3A_3A/Sql/pgsql/quote.html'>quote()</a> automatically adjusts quoting strategy accordingly.</p>
</td></tr>
<tr><td><code><code class='key'>"escape_string_warning"</code> : <code class='datatype'>string</code></code></td><td><p>When on, a warning is issued if a backslash (\) appears in an
	ordinary string literal and <code class='expr'>"standard_conforming_strings"</code>
	is off, defaults to on.</p>
</td></tr>
</table><p>For the numerous other options please check the PostgreSQL manual.</p>
</dd>
<dt class='head--doc'>Note</dt>
<dd class='body--doc'><p>You need to have a database selected before using the sql-object,
 otherwise you'll get exceptions when you try to query it. Also
 notice that this function <b>can</b> raise exceptions if the db
 server doesn't respond, if the database doesn't exist or is not
 accessible to you.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../predef_3A_3A/Postgres/postgres.html'>Postgres.postgres</a>, <a class='ms reference' href='../../predef_3A_3A/Sql/Sql.html'>Sql.Sql</a>, <a class='ms reference' href='../../predef_3A_3A/Sql/pgsql/select_db.html'>select_db()</a>,
   <a href='http://www.postgresql.org/search/?u=%2Fdocs%2Fcurrent%2F&q=client+connection+search_path'>http://www.postgresql.org/search/?u=%2Fdocs%2Fcurrent%2F&q=client+connection+search_path</a></p>
</dd></dl>

          </article>
        </div>
      </div>
    </div>
    <footer>
      <div id="build-date">Extracted from <strong data-id="version"></strong> as of <strong data-id="date"></strong>.</div>
    </footer>
    <script>PikeDoc.current = {"link":"ex/predef_3A_3A/Sql/pgsql.html","name":"pgsql"};</script>
<script src='../../../ex/predef_3A_3A/Sql/index.js'></script>
<script src='../../../ex/predef_3A_3A/Sql/pgsql/load_index.js'></script>
    <script>
      // Tell PikeDoc that next actions are from loaded scripts
      PikeDoc.isInline = false;
    </script>
  </body>
</html>
