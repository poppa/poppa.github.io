<!doctype html>
<html>
  <head>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta charset="utf-8">
    <title>Pike Reference Manual - Thread.Mutex()-&gt;lock()</title>
    <!-- 220-->
    <link rel='stylesheet' href='../../../../style.css'>
    <script src='../../../../site.js'></script>
    <script src='../../../../pike_version.js'></script>
    <script src='../../../../timestamp.js'></script>
    <style type='text/css'>
svg line { stroke:#343434; stroke-width:2; }
svg text { fill:#343434; }
svg a { fill:#0768b2; text-decoration: underline; }
</style>

  </head>
  <body>
    <header>
      <div class="header">
        <div id="version"><strong data-id="version"></strong></div>
        <div id="burger">&#9776;</div><!-- Hamburger icon -->
        <h1>
          <a href="http://pike.lysator.liu.se/" class="logo">
            <span>Pike programming language</span>
          </a>
        </h1>
      </div>
    </header>
    <div id="page">
      <div class="navbar">
        <nav>
          <div class="inner" id="navbar">
            <a href='../../../../index.html'><b class='top head'>Top</b></a>
<a href='../../../../ex/predef_3A_3A/Thread.html'><b class='head'>Thread</b></a>
<a href='../../../../ex/predef_3A_3A/Thread/Mutex.html'><b class='head'>Thread.Mutex</b></a>
<script></script>
<noscript>
<div class='sidebar'>
<a href='../../../../ex/predef_3A_3A/Thread/Mutex/index.html'><b>Symbol index</b></a><br />
</div>
</noscript>

          </div>
        </nav>
      </div>
      <div class="content">
        <div class="navbox">
          <nav>
            <div class="sidebar">
              <a href="../../../../ex/predef_3A_3A/Thread/Mutex/current_locking_thread.html" class="prev"><span>&#10148;</span> Thread.Mutex()-&gt;current_locking_thread()</a>
              <a href="../../../../ex/predef_3A_3A/Thread/Mutex/trylock.html" class="next">Thread.Mutex()-&gt;trylock() <span>&#10148;</span></a>
            </div>
          </nav>
        </div>
        <div class="contentbox">
          <article>
            <h1>Method Thread.Mutex()-&gt;lock()</h1>
            

<hr />
<dl class='group--doc'>
<dt class='head--type'><span class='homogen--type'>Method</span>
<span class='homogen--name'><b>lock</b></span>
</dt>
<dd><p><code><code class='object resolved'><a class='ms reference' href='../../../predef_3A_3A/Thread/MutexKey.html'>MutexKey</a></code> <b><span class='method'>lock</span>(</b><b>)</b></code><br>
<code><code class='object resolved'><a class='ms reference' href='../../../predef_3A_3A/Thread/MutexKey.html'>MutexKey</a></code> <b><span class='method'>lock</span>(</b><code class='datatype'>int</code> <code class='argument'>type</code><b>)</b></code></p></dd>

<dt class='head--doc'>Description</dt>
<dd class='body--doc'><p>This function attempts to lock the mutex. If the mutex is already
 locked by a different thread the current thread will sleep until the
 mutex is unlocked. The value returned is the 'key' to the lock. When
 the key is destructed or has no more references the mutex will
 automatically be unlocked.</p>
<p> The <code class='reference paramref'>type</code> argument specifies what <a class='ms reference' href='../../../predef_3A_3A/Thread/Mutex/lock.html'>lock()</a> should do if the
 mutex is already locked by this thread:</p>
<table class='box'><tr><td><code><code class='key'>0</code></code></td><td><p>Throw an error.</p>
</td></tr>
<tr><td><code><code class='key'>1</code></code></td><td><p>Sleep until the mutex is unlocked. Useful if some
     other thread will unlock it.</p>
</td></tr>
<tr><td><code><code class='key'>2</code></code></td><td><p>Return zero. This allows recursion within a locked region of
     code, but in conjunction with other locks it easily leads
     to unspecified locking order and therefore a risk for deadlocks.</p>
</td></tr>
</table>
</dd>
<dt class='head--doc'>Note</dt>
<dd class='body--doc'><p>If the mutex is destructed while it's locked or while threads are
 waiting on it, it will continue to exist internally until the last
 thread has stopped waiting and the last <a class='ms reference' href='../../../predef_3A_3A/Thread/MutexKey.html'>MutexKey</a> has
 disappeared, but further calls to the functions in this class will
 fail as is usual for destructed objects.</p>
</dd>
<dt class='head--doc'>Note</dt>
<dd class='body--doc'><p>Pike 7.4 and earlier destructed any outstanding lock when the
 mutex was destructed, but threads waiting in <a class='ms reference' href='../../../predef_3A_3A/Thread/Mutex/lock.html'>lock</a> still got
 functioning locks as discussed above. This is inconsistent no
 matter how you look at it, so it was changed in 7.6. The old
 behavior is retained in compatibility mode for applications that
 explicitly destruct mutexes to unlock them.</p>
</dd>
<dt class='head--doc'>See also</dt>
<dd class='body--doc'><p><a class='ms reference' href='../../../predef_3A_3A/Thread/Mutex/trylock.html'>trylock()</a></p>
</dd></dl>

          </article>
        </div>
      </div>
    </div>
    <footer>
      <div id="build-date">Extracted from <strong data-id="version"></strong> as of <strong data-id="date"></strong>.</div>
    </footer>
    <script>PikeDoc.current = {"link":"ex/predef_3A_3A/Thread/Mutex/lock.html","name":"lock"};</script>
<script src='../../../../ex/predef_3A_3A/Thread/Mutex/index.js'></script>
<script src='../../../../ex/predef_3A_3A/Thread/Mutex/load_index.js'></script>
    <script>
      // Tell PikeDoc that next actions are from loaded scripts
      PikeDoc.isInline = false;
    </script>
  </body>
</html>
